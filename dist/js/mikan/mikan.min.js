/*
 * mikan.js JavaScript Web Library
 *  JavaScript Module
 *
 * Copyright (C) 1997-2016 K.Sonohara All Rights Reserved.
 *   Deploy by ExpertSoftware Inc.
 *  *   配布: 株式会社エキスパートソフトウェア
 *
 * Code released under [Mozilla Public License, version 2.0]
 *   https://github.com/ksonohara/mikan_js/blob/master/LICENSE)
 *
 * https://github.com/ksonohara/mikan_js/
 * https://www.e-software.company/
 */
var MIKAN_JS_MIN=1;function mikan_url_root(){return MIKAN_URL_ROOT}function mikan_url_js(){return MIKAN_URL_JS}function mikan_url_js_mikan(){return MIKAN_URL_JS_MIKAN}function mikan_url_css(){return MIKAN_URL_CSS}function mikan_url_images(){return MIKAN_URL_IMAGES}function mikan_url_wsgi(){return MIKAN_URL_WSGI}function mikan_url_htdocs(){return MIKAN_URL_HTDOCS}function mikan_url_css_mikan(){return MIKAN_URL_CSS_MIKAN}if(window.console||(window.console={log:function(a){}},console=window.console),"undefined"==typeof MIKAN_URL_ROOT)var MIKAN_URL_ROOT="./";if("undefined"==typeof MIKAN_URL_HTDOCS)var MIKAN_URL_HTDOCS="./";if("undefined"==typeof MIKAN_URL_IMAGES)var MIKAN_URL_IMAGES=mikan_url_htdocs()+"images/";if("undefined"==typeof MIKAN_URL_CSS)var MIKAN_URL_CSS=mikan_url_htdocs()+"css/";if("undefined"==typeof MIKAN_URL_JS)var MIKAN_URL_JS=mikan_url_htdocs()+"js/";if("undefined"==typeof MIKAN_URL_WSGI)var MIKAN_URL_WSGI=MIKAN_URL_ROOT;if("undefined"==typeof MIKAN_URL_CSS_MIKAN)var MIKAN_URL_CSS_MIKAN=mikan_url_css()+"mikan/";if("undefined"==typeof MIKAN_URL_JS_MIKAN)var MIKAN_URL_JS_MIKAN=mikan_url_js()+"mikan/";if("undefined"==typeof MIKAN_JS_MIN)var MIKAN_JS_MIN=!1;if("undefined"==typeof MIKAN_JS_ON)var MIKAN_JS_ON=!1;if("undefined"==typeof MIKAN_DEBUG_ON)var MIKAN_DEBUG_ON=!1;if("undefined"==typeof MIKAN_TOOL_ON)var MIKAN_TOOL_ON=!1;if("undefined"==typeof MIKAN_LANG)try{var MIKAN_LANG=(navigator.userLanguage||navigator.browserLanguage||navigator.language).substr(0,2)}catch(e){var MIKAN_LANG="ja"}if("undefined"==typeof mikan)var mikan={};if("undefined"==typeof mikan.resource&&(mikan.resource={}),"undefined"==typeof mikan.page&&(mikan.page={}),MIKAN_JS_ON===!1){var MIKAN_JS_MIKAN_FILES=[];if(MIKAN_JS_MIN||(MIKAN_JS_MIKAN_FILES=["mikan.const.js","mikan.resource.js","mikan.util.js","mikan.action.js","mikan.json.js","mikan.html.js","mikan.dialog.js","mikan.form.js","mikan.canvas.js","mikan.media.js","mikan.page.js"]),MIKAN_JS_MIKAN_FILES.push("i18n/"+MIKAN_LANG+"/mikan.resource.js"),"undefined"==typeof MIKAN_JS_FILES)var MIKAN_JS_FILES=[]}if(mikan.js_load=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=c;return"undefined"==typeof c&&(d="utf-8"),'<script type="text/javascript" src="'+a+b+'" charset="'+d+'">;</script>'},mikan.jss_load=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,name,c]);var d=c;"undefined"==typeof c&&(d="utf-8");for(var e="",f=0;f<b.length;f++)e+=mikan.js_load(a,b[f],d);document.writeln(e)},0==MIKAN_JS_ON){MIKAN_DEBUG_ON&&console.log(["MIKAN_JS_ON: "+MIKAN_JS_ON,"MIKAN_JS_MIN: "+MIKAN_JS_MIN,"MIKAN_URL_ROOT: "+mikan_url_root(),"MIKAN_URL_HTDOCS: "+mikan_url_htdocs(),"MIKAN_URL_WSGI: "+mikan_url_wsgi(),"MIKAN_URL_JS: "+mikan_url_js(),"MIKAN_URL_CSS: "+mikan_url_css()]);try{mikan.jss_load(mikan_url_js_mikan(),MIKAN_JS_MIKAN_FILES,"utf-8"),mikan.jss_load(mikan_url_js(),MIKAN_JS_FILES,"utf-8"),MIKAN_JS_ON=!0}catch(e){console&&console.error(e),MIKAN_JS_ON=!1}!function(a){a.fn.mikan_dialog_picture=function(b){mikan.dialog.picture(a(this),b)}}(jQuery)}mikan.consts={};var MIKAN_TAG_LT="<",MIKAN_TAG_GT=">",MIKAN_TAG_S_QUOT='"',MIKAN_TAG_D_QUOT="'";void 0===mikan.resource&&(mikan.resource={}),mikan.resource.form={},mikan.resource.message={},mikan.resource.form.messages={},mikan.resource.OK="OK",mikan.resource.CANCEL="Cancel",mikan.resource.CLOSE="Close",mikan.resource.YES="Yes",mikan.resource.NO="No",mikan.resource.BACK="Back",mikan.resource.NEXT="Next",mikan.resource.ERROR="Error",mikan.resource.CONFIRM="Confirm",mikan.resource.SUBMIT="Submit",mikan.resource.LOADING="Loading..",mikan.resource.DONE="Done",mikan.resource.PROCESS="Process",mikan.resource.PROCESSING="Processing..",mikan.resource.REQUIRED="Required",mikan.resource.ITEMS=" items",mikan.resource.ALL="All",mikan.resource.message.DONE="Process done.",mikan.resource.form.messages.REQUIRED="Do rrequired.",mikan.resource.form.messages.NUMBER="Number only.",mikan.resource.form.messages.MATCH="is not matched.",mikan.resource.form.messages.REG="No input format.",mikan.resource.form.messages.NOSELECT="Need selected.",mikan.resource.form.messages.NOTFOUNTZIPCODE="Not Found ZipCode.",mikan.util={},mikan.util.consts={},mikan.util.vars={},mikan.util.event={},mikan.util.is_undefined=function(a){return MIKAN_DEBUG_ON&&console.log([a]),"undefined"==typeof a},mikan.util.escape=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),mikan.util.is_undefined(b)&&(b=!1);try{return b?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):$("<div />").text(a).html()}catch(c){return""}},mikan.util.escape_json=function(a,b,c){if(MIKAN_DEBUG_ON&&console.log([a,b,c]),mikan.util.is_undefined(b)&&(b=!0),mikan.util.is_undefined(c)&&(c=!1),a)try{for(var d in a){var e=a[d];"string"==typeof e?e=mikan.util.escape(e,c):"function"==typeof e?e=null:mikan.util.is_undefined(e)||"number"==typeof e||"boolean"==typeof e||("object"==typeof e?b&&(e=mikan.util.escape_json(e,b,c)):console.log(typeof e)),a[d]=e}}catch(f){console.error(f)}return a},mikan.action={},mikan.action.consts={},mikan.action.vars={},mikan.action.event={},mikan.action.ACV=function(){MIKAN_DEBUG_ON&&console.log([this]),this.on_prepare=null,this.on_execute=null,this.on_success=null,this.on_error=null,this.on_end=null},mikan.action.ACV.prototype.run=function(a){MIKAN_DEBUG_ON&&console.log([a]);var b=a;a||(b={});try{this.on_prepare&&this.on_prepare(b),setTimeout(function(a,b){a.execute(b)},1,this,b)}catch(c){MIKAN_DEBUG_ON&&console.log(c),this.error(a,c)}},mikan.action.ACV.prototype.ajax=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=d;d||(e={type:"POST",async:!0,cache:!1});var f=this;MIKAN_DEBUG_ON&&console.log([f]);var g=mikan.json.post(b,c,e);g.always(function(b,c){MIKAN_DEBUG_ON&&console.log([b,c]),"success"===c?f.success(a,b):f.error(a,c)})},mikan.action.ACV.prototype.execute=function(a){if(MIKAN_DEBUG_ON&&console.log([a]),this.on_execute)try{var b=this.on_execute(a);b&&this.success(a,b)}catch(c){this.error(a,c)}else this.error(a,null)},mikan.action.ACV.prototype.error=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);try{this.on_error&&this.on_error(a,b)}catch(c){MIKAN_DEBUG_ON&&console.log([a,b,c])}try{this.on_end&&this.on_end(a)}catch(c){MIKAN_DEBUG_ON&&console.log([a,b,c])}},mikan.action.ACV.prototype.success=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);try{this.on_success&&this.on_success(a,b);try{this.on_end&&this.on_end(a)}catch(c){MIKAN_DEBUG_ON&&console.log([a,b,c])}}catch(c){this.error(a,c)}},mikan.action.AjaxACV=function(){this.on_prepare=null,this.on_execute=function(a){MIKAN_DEBUG_ON&&console.log(a),a.url?this.ajax(a,a.url,a.params,a.option):this.on_end(a)},this.on_success=null,this.on_error=null,this.on_end=null},mikan.action.AjaxACV.prototype=Object.create(mikan.action.ACV.prototype),mikan.json={},mikan.json.consts={},mikan.json.vars={},mikan.json.event={},mikan.json.consts.ajax_defaults={type:"GET",scriptCharset:"utf-8",dataType:"json",cache:!1,async:!1},mikan.json.consts.options_defaults={escape:!0,useformdata:!1},mikan.json.response=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=a;return d?(d=$.parseJSON(d),b?mikan.util.escape_json(d,c):d):null},mikan.json.ajax=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=$.extend(!0,{},mikan.json.consts.ajax_defaults,c),f=$.extend(!0,{},mikan.json.consts.options_defaults,d);try{e.url=a,f.useformdata&&(e.contentType=!1,e.processData=!1),b&&(e.data=b),MIKAN_DEBUG_ON&&console.log([e,f]);var g=$.ajax(e);return e.async?g:mikan.json.response(g.responseText,f.escape)}catch(h){MIKAN_DEBUG_ON&&console.log(h),f.error&&f.error(h)}return null},mikan.json.get=function(a,b,c,d){return MIKAN_DEBUG_ON&&console.log([a,b,c,d]),mikan.json.ajax(a,b,c,d)},mikan.json.post=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=$.extend(!0,mikan.json.consts.ajax_defaults,c);return e.type="POST",mikan.json.ajax(a,b,e,d)},mikan.html={},mikan.html.bootstrap={},mikan.html.fa={},mikan.html.icon={},mikan.html.icon.consts={},mikan.html.message={},mikan.html.form={},mikan.html.form.vars={},mikan.html.table={},mikan.html.table.vars={},mikan.html.table.vars.datatables={},mikan.html.carousel={},mikan.html.icon.consts.ATTENTION="fa-hand-o-up",mikan.html.icon.consts.CHECK="fa-check-square",mikan.html.icon.consts.UNCHECKED="fa-square-o",mikan.html.icon.html=function(a,b){return MIKAN_DEBUG_ON&&console.log([a,b]),b||(b="fa"),'<span class="'+b+" "+a+'"> </span>'},mikan.html.icon.attention=function(){return MIKAN_DEBUG_ON&&console.log([]),mikan.html.icon.html(mikan.html.icon.consts.ATTENTION)},mikan.html.icon.check=function(){return MIKAN_DEBUG_ON&&console.log([]),mikan.html.icon.html(mikan.html.icon.consts.CHECK)},mikan.html.icon.unchecked=function(){return MIKAN_DEBUG_ON&&console.log([]),mikan.html.icon.html(mikan.html.icon.consts.UNCHECKED)},mikan.html.bootstrap.rss=function(a,b,c){if(MIKAN_DEBUG_ON&&console.log([a,b,c]),void 0===c)var c="fa fa-rss";for(var d="",e=0;e<a.length;e++){var f=a[e];d+='<div class="row">',d+='<div class="col-xs-12">',d+=b?'<a href="'+mikan.page.url.wsgi+"/"+f.url+'">':'<a href="'+f.url+'" target="_blank">',d+="<div>",d+='<span class="',d+=c,d+='"> </span> ',d+=f.type,d+='<span class="pull-right text-muted">'+f.date+"</span>",d+="</div>",d+='<div class="text-indent">',d+='<span class="text-muted">&nbsp;&nbsp;</span>',d+=f.title,d+="</div>",d+="</a>",d+="<br />",d+="</div>",d+="</div>"}return d},mikan.html.bootstrap.table=function(a,b,c,d,e,f,g,h,i,j){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d,e,f,g,h,i,j]),void 0===d)var d=null;if(void 0===e)var e=null;if(void 0===f)var f=null;if(void 0===g)var g="default";if(void 0===h)var h=!1;if(void 0===i)var i=null;if(void 0===j)var j=null;var k='<div class="panel panel-'+g+'">';if(null!=d&&(k+='<div class="panel-heading">',k+="<h4>",null!=e&&(k+='<span class="fa fa-'+_icon+'"> </span> '),k+=d,k+="</h4>",k+="</div>"),k+='<table class="table table-striped table-bordered table-hover">',h){k+="<tbody>";for(var l in a)k+="<tr>",k+='<th class="text-right">',k+=b[a[l]],k+="</th>",k+="<td>",k+=c[a[l]]?c[a[l]]:" ",k+="</td>",k+="</tr>";k+="</tbody>"}else{if(b){k+="<thead>",k+="<tr>";for(var l in a){var m=a[l];k+="<th>",k+=b[m],k+="</th>"}k+="</tr>",k+="</thead>"}k+="<tbody>";for(var n in c){var o="",p="";null!=i&&(p=' id="'+i.replace("%d",n)+'"'),null!=j&&(o=' onclick="'+j.replace("%d",n)+'"'),k+="<tr"+p+o+' class="item">';for(var l in a){var m=a[l];k+="<td>",k+=c[n][m]?c[n][m]:" ",k+="</td>"}k+="</tr>"}k+="</tbody>"}return k+="</table>",null!=f&&(k+='<div class="panel-footer">',k+="<p>",k+=f,k+="</p>"),k+="</div>"},mikan.html.bootstrap.breadcrumbs=function(a){MIKAN_DEBUG_ON&&console.log([a]);for(var b='<ol class="breadcrumb">',c=0;c<a.length;c++){var d=a[c];b+="<li>",b+="<a",d.href&&(b+=' href="',b+=d.href,b+='"'),d.onclick&&(b+=' onclick="',b+=d.onclick,b+='"'),b+=">",d.icon&&(b+='<span class="fa fa-'+d.icon+'"> </span>',b+=" "),b+=d.caption,b+="</a>",b+="</li>"}return b+="</ol>"},mikan.html.bootstrap.message=function(a,b,c,d){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d]),void 0===c)var c="default";if(void 0===d)var d=null;var e="",f="panel panel-"+c,g=null;return d&&(g='<span class="fa fa-'+d+'"> </span>'),e+='<div class="'+f+'">',e+='<div class="panel-heading">',e+="<h4>",g&&(e+=g+" "),e+=a,e+="</h4>",e+="</div>",e+='<div class="panel-body">',e+="<h4>",e+=b,e+="</h4>",e+="</div>",e+="</div>"},mikan.html.bootstrap.load_sidemenu=function(a){MIKAN_DEBUG_ON&&console.log([a]);var b=null;try{b=mikan.json.get(a).items}catch(c){MIKAN_DEBUG_ON&&console.log(c)}return mikan.html.bootstrap.create_sidemenu(b)},mikan.html.bootstrap.create_sidemenu=function(a){return MIKAN_DEBUG_ON&&console.log([a]),mikan.html.bootstrap.create_item_sidemenu(a)},mikan.html.bootstrap.create_item_sidemenu=function(a,b){if(MIKAN_DEBUG_ON&&console.log([a,b]),a){if("undefined"==typeof b)var b=0;for(var c="",d=0;d<a.length;d++){var e=a[d];c+="<li>",c+="<a",c+=e.url?' href="'+e.url+'"':' href="#"',e.target&&(c+=' target="'+e.target+'"'),c+=">",e.icon&&(c+='<i class="',c+=e.icon,c+='"> </i> '),c+=e.caption,e.badges&&(c+=' <span class="badge">',c+=e.badges,c+="</span>"),e.items&&(c+='<span class="fa arrow"> </span>'),c+="</a>",e.items&&(c+=1==b?'<ul class="nav nav-third-level">':'<ul class="nav nav-second-level">',c+=mikan.html.bootstrap.create_item_sidemenu(e.items,b+1),c+="</ul>"),c+="</li>"}return c}return""},mikan.html.bootstrap.create_tile=function(a,b,c,d,e){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d,e]),void 0===d)var a="primary";var f="";if(f+='<div class="panel panel-'+a+'">',f+='<div class="panel-heading">',f+='<div class="row">',f+='<div class="col-xs-3">',b&&(f+='<i class="'+b+'"> </i>'),f+="</div>",f+='<div class="col-xs-9 text-right">',c&&(f+='<div class="huge">'+c+"</div>"),d)for(var g=0;g<d.length;g++){var h=d[g];f+="<div>",h.text&&(f+=h.text),f+="</div>"}return f+="</div>",f+="</div>",f+="</div>",e&&(e.url&&(f+='<a href="',f+=e.url,f+='">'),f+='<div class="panel-footer">',e.url&&(f+='<span class="pull-left">',f+=e.title,f+="</span>"),e.url&&(f+='<span class="pull-right"><i class="',f+=e.icon,f+='"> </i> </span>'),f+='<div class="clearfix"> </div>',f+="</div>",e.url&&(f+="</a>")),f+="</div>"},mikan.html.table.create_list=function(a){if(MIKAN_DEBUG_ON&&console.log([a]),a){var b=a.name,c=(a.header.select,"");c+="<colgroup>";for(var d=0;d<a.header.columns.length;d++){var e=a.header.columns[d];e.show!==!1&&(c+="<col",e.width&&(c+=' width="'+e.width+'"'),e.align&&(c+=' align="'+e.align+'"'),c+=" />")}c+="</colgroup>",c+="<thead>";for(var d=0;d<a.header.columns.length;d++){var e=a.header.columns[d];e.show!==!1&&(c+="<th",e.align&&(c+=' class="text-'+e.align+'"'),c+=">",c+=e.caption?e.caption:e.name,c+="</th>")}c+="</thead>",c+="<tbody>";var f=0;for(var g in a.items){var h=a.items[g];c+="<tr",c+=' id="',c+=b,c+="_item_",c+=f,c+='"',c+=' data-id="',c+=h[0].v,c+='"',c+=">";for(var d=0;d<a.header.columns.length;d++){var e=a.header.columns[d];e.show!==!1&&(d<h.length?(c+="<td",e.align&&(c+=' class="text-'+e.align+'"'),c+=">",e.link&&(c+='<a href="',c+=e.link,c+=h[0].v,c+='">'),h[d].c?c+=h[d].c:(h[d].v||0===h[d].v)&&(c+=h[d].v),h[d].b&&(c+=' <span class="badge pull-right">',c+=h[d].b,c+="</span>"),h[d].l&&(c+=' <span class="label pull-right ',h[d].l.c&&(c+=h[d].l.c),c+='">',c+=' <span class="',h[d].l.i&&(c+=h[d].l.i),c+='">',c+=h[d].l.v,c+=" </span>",c+=" </span>"),e.link&&(c+="</a>"),c+=" ",c+="</td>"):(c+="<td>",c+=" ",c+="</td>"))}c+="</tr>",f+=1}return c+="</tbody>"}return""},mikan.html.load_table=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=mikan.json.post(b,c),e=$(a);e.html(mikan.html.table.create_list(d)),e.DataTable({lengthMenu:[[100,200,300,-1],["100"+mikan.resource.ITEMS,"200"+mikan.resource.ITEMS,"300"+mikan.resource.ITEMS,mikan.resource.ALL]],language:{lengthMenu:"表示件数 _MENU_",loadingRecords:"読みこみ中・・・",zeroRecords:"該当するデータがありませんでした。",info:"全_PAGES_ページ中_PAGE_ページ目",infoEmpty:"該当するデータがありませんでした。",infoFiltered:" [全_MAX_件からフィルタ中]",search:"検索フィルタ",searchPlaceholder:"キーワード",paginate:{first:mikan.resource.FIRST,last:mikan.resource.LAST,next:mikan.resource.NEXT,previous:mikan.resource.BACK}}})},mikan.html.load_search=function(a,b,c,d,e){MIKAN_DEBUG_ON&&console.log([a,b,c,d,e]),mikan.form.html.load_json("form",b,a),e&&mikan.html.search_table(a,c,d)},mikan.html.search_table=function(a,b,c){if(MIKAN_DEBUG_ON&&console.log([a,b,c]),null==mikan.form.validate_json(a,null)){var d=new FormData;for(var e in mikan.form.items[a]){var f=mikan.form.items[a][e];if(MIKAN_DEBUG_ON&&console.log([f.name,f.value]),"file"!=f.type)d.append(f.name,f.value);else{var g=$("#"+a+"_"+f.name);MIKAN_DEBUG_ON&&console.log(g),d.append(f.name,g[0].files[0])}}mikan.html.load_table(b,c,d)}else $("#"+b+"_messages").html(mikan.html.bootstrap.message(mikan.resource.ERROR,"入力内容を御確認ください。","danger","user")),mikan.form.html.load_datetimepicker()},mikan.html.table.select=function(a){MIKAN_DEBUG_ON&&console.log([a]);try{var b=mikan.html.table.vars.datatables[a].rows({selected:!0}),c=[];MIKAN_DEBUG_ON&&console.log(b);for(var d in b[0]){var e=b[0][d];try{var f=$("#"+a+"_item_"+e),g=f.attr("data-id");c.push(g)}catch(h){console.log(h)}}return MIKAN_DEBUG_ON&&console.log([b,c]),c}catch(h){return null}},mikan.html.onselect_buttons=function(a,b,c,d){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d]),count=0,d){var e=c.rows({selected:!0});count=e[0].length}0==count?($(".select-no").removeClass("disabled"),$(".select-single").addClass("disabled"),$(".select-multi").addClass("disabled"),$(".select-both").addClass("disabled")):1==count?($(".select-no").addClass("disabled"),$(".select-single").removeClass("disabled"),$(".select-multi").addClass("disabled"),$(".select-both").removeClass("disabled")):count>1&&($(".select-no").addClass("disabled"),$(".select-single").addClass("disabled"),$(".select-multi").removeClass("disabled"),$(".select-both").removeClass("disabled"))},mikan.html.html_buttons=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c="";for(var d in b){var e=b[d];c+='<div class="btn-group" aria-label="buttons" role="group">',c+=mikan.html.html_buttons_button(a,e),c+="</div> "}return c},mikan.html.html_buttons_button=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c="";for(var d in b){var e=b[d];c+='<button class="btn btn-',c+=e.type?e.type:"default",e.select?(c+=" select-"+e.select,"single"!=e.select&&"multi"!=e.select&&"both"!=e.select||(c+=" disabled")):c+=" select-always",c+='" type="button" onclick=" if (!$(this).hasClass(\'disabled\')) mikan.html.table.dialog_form(\'',c+=a,c+="', '",c+=d,c+="', '",c+=e.url,c+="');\">",c+=e.caption,c+="</button>"}return c},mikan.html.table.dialog_form=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=mikan.html.table.select(a);d&&1==d.length&&(d=d[0]),MIKAN_DEBUG_ON&&console.log(d),mikan.dialog.form(c,{m:b,id:d},{})},mikan.html.form.create_form=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=new mikan.action.AjaxACV;d.on_prepare=function(a){a.url=b},d.on_success=function(b,d){$("#"+a).html(mikan.html.form.html_form(a,d,c)),mikan.form.init_plugin()},d.on_error=function(b,c){$("#"+a).text(c)},d.run()},mikan.html.form.html_form=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=a+"_form",f=a+"_buttons",g="";return g+='<form class="form-horizontal" role="form" enctype="multipart/form-data" onsubmit=" return false; " name="'+e+'">',g+='<div class="row-fluid">',g+='<div class="col-xs-12" id="'+e+'_messages"> ',g+="</div>",g+='<div class="col-xs-12">',g+="<br />",g+=mikan.form.html.html_json(a,b,e),g+="</div>",g+='<div class="row-fluid hidden-print">',g+='<div class="col-xs-12">',g+="<hr />",g+="</div>",d&&b.buttons&&(g+='<div class="col-md-offset-3 col-md-3 col-xs-6">',g+='<button id="'+e+'_submit" class="btn btn-default btn-block" type="button"',g+=" onclick=\"mikan.html.form.submit('"+a+"', '"+d+"'); \">",g+=b.buttons.submit.caption,g+="</button>",g+="</div>"),g+="</div>",g+="</div>",g+="</div>",g+="</form>",d&&b.buttons&&(g+='<div class="row-fluid">',g+='<div id="',g+=f,g+='" >',g+=mikan.html.html_buttons(a,d),g+="</div>",g+="</div>"),g+="</div>"},mikan.html.table.html_form=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=a+"_form",f=a+"_list",g=a+"_buttons",h="";return h+='<div class="panel panel-default">',h+='<div class="panel-body">',h+='<form class="form-horizontal" role="form" enctype="multipart/form-data" onsubmit=" return false; " name="'+e+'">',h+='<div class="row-fluid">',h+='<div class="col-xs-12" id="'+e+'_messages"> ',h+="</div>",h+='<div class="col-xs-12">',h+="<br />",h+=mikan.form.html.html_json(a,b,e),h+="</div>",h+='<div class="row-fluid hidden-print">',h+='<div class="col-xs-12">',h+="<hr />",h+="</div>",h+='<div class="col-md-offset-3 col-md-3 col-xs-6">',h+='<button id="'+e+'_submit" class="btn btn-default btn-block" type="button"',h+=" onclick=\"mikan.html.table.search('"+a+"', '"+c+"'); \">",h+=b.buttons.submit.caption,h+="</button>",h+="</div>",h+="</div>",h+="</div>",h+="</div>",h+="</form>",h+="</div>",h+="</div>",d&&(h+='<div class="panel panel-default">',h+='<div class="panel-body">',h+='<div class="row-fluid">',h+='<div id="',h+=g,h+='" >',h+=mikan.html.html_buttons(a,d),h+="</div>",h+="</div>",h+="</div>",h+="</div>"),h+='<div class="panel panel-default">',h+='<div class="panel-body">',h+='<table class="table table-bordered table-condensed table-hover display compact" id="'+f+'">',h+="</table>",h+="</div>",h+="</div>"},mikan.html.table.create_form_list=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=new mikan.action.AjaxACV;d.on_prepare=function(a){a.url=b},d.on_success=function(b,d){$("#"+a).html(mikan.html.table.html_form(a,d,c,d?d.tools:null)),mikan.form.init_plugin(),$("#"+a+"_form_submit").click()},d.on_error=function(b,c){$("#"+a).text(c)},d.run()},mikan.html.table.create_datatable=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c=a+"_form",d=a+"_list",e=a+"_buttons",f=$("#"+d);if(mikan.html.table.vars.datatables[a]&&mikan.html.table.vars.datatables[a].destroy(),b){f.html(mikan.html.table.create_list(b));var g=f.DataTable({lengthMenu:[[100,200,300,-1],["100"+mikan.resource.ITEMS,"200"+mikan.resource.ITEMS,"300"+mikan.resource.ITEMS,mikan.resource.ALL]],select:!!b.header.select&&{style:"multi"},language:{lengthMenu:"表示件数 _MENU_",loadingRecords:"読みこみ中・・・",zeroRecords:"該当するデータがありませんでした。",info:"全_PAGES_ページ中_PAGE_ページ目",infoEmpty:"該当するデータがありませんでした。",infoFiltered:" [全_MAX_件からフィルタ中]",search:"検索フィルタ",searchPlaceholder:"キーワード",paginate:{first:mikan.resource.FIRST,last:mikan.resource.LAST,next:mikan.resource.NEXT,previous:mikan.resource.BACK}}});mikan.html.table.vars.datatables[a]=g;var f=$("#"+e);f.size()>0&&g.on("init.dt",function(){mikan.html.onselect_buttons(!0,this,g,null)}).on("select",function(a,b,c,d){mikan.html.onselect_buttons(!0,this,g,d)}).on("deselect",function(a,b,c,d){mikan.html.onselect_buttons(!1,this,g,d)}),mikan.form.init_plugin()}else f.html("");$("#"+c+"_submit").removeClass("disabled"),$("#"+c+"_messages").html("")},mikan.html.table.search=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c=a+"_form",d=new mikan.action.AjaxACV;d.on_prepare=function(a){$("#"+c+"_submit").addClass("disabled"),$("#"+c+"_messages").html(mikan.html.message.html_loading());var d=mikan.form.validate_json(c,null);if(null!=d)throw new Error("エラーが発生しました。入力内容を御確認ください。");var e={},f=mikan.form.items[c];MIKAN_DEBUG_ON&&console.log(f);try{void 0!=f.items&&(f=f.items)}catch(g){}for(var h in f){var i=f[h],j=mikan.form.value(c,i);j&&(e[i.name]=j)}a.params=e,a.url=b},d.on_success=function(b,d){MIKAN_DEBUG_ON&&console.log([b,d]),mikan.html.table.create_datatable(a,d),d.messages?$("#"+c+"_messages").html(mikan.html.message.html_messages(d.messages,"info")):$("#"+c+"_messages").html("")},d.on_error=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),b.messages?$("#"+c+"_messages").html(mikan.html.message.html_messages(b.messages,"danger")):b.message?$("#"+c+"_messages").html(mikan.html.message.html_messages(b.message,"danger")):$("#"+c+"_messages").html(mikan.html.message.html_messages(b,"danger"))},d.on_end=function(a){$("#"+c+"_submit").removeClass("disabled")},d.run(null)},mikan.html.message.html_message=function(a,b){if(MIKAN_DEBUG_ON&&console.log([a,b]),!a)return"";void 0===b&&(b="default");var c="";return c+='<li class="list-group-item list-group-item-'+b+'">',c+=a,c+="</li>"},mikan.html.message.html_messages=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c="";if(a)if(a.message)c+=mikan.html.message.html_message(a.message,b);else if(a instanceof Object)for(_key in a){var d=a[_key];d&&(c+=d.type?mikan.html.message.html_message(d.text,d.type):mikan.html.message.html_message(d,b))}else if(a instanceof Array)for(_key in a){var d=a[_key];c+=d.type?mikan.html.message.html_message(d.text,d.type):mikan.html.message.html_message(d,b)}else c+=mikan.html.message.html_message(a,b);return""!=c?'<ul class="list-group">'+c+"</ul>":""},mikan.html.message.html_loading=function(){MIKAN_DEBUG_ON&&console.log([]);var a="";return a+='<img class="loading" src="'+mikan_url_images()+'loading.gif" alt="',a+=mikan.resource.LOADING,a+='" /> ',a+=mikan.resource.PROCESSING,mikan.html.message.html_messages(a,"info")},mikan.dialog={},mikan.dialog.consts={},mikan.dialog.vars={},mikan.dialog.event={},mikan.dialog.consts.modal_defaults={id:"mikan_dialog",icon:null,size:null,zindex:null,class_modal:"fade",class_title:null,onclose:null,backdrop:!1,buttons:[{caption:mikan.resource.OK,close:!0,onclick:"mikan.dialog.event.modal_button",class_click:"btn-primary"}]},mikan.dialog.consts.form_defaults={id:"mikan_dialog",icon:"fa fa-pencil-square-o",size:"modal-lg"},mikan.dialog.event.modal_button=function(a,b){$(a).attr({"data-result":b})},mikan.dialog.event.click_form_back=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),mikan.form.html.post_json(a,null,!0,!0)},mikan.dialog.event.click_form_submit=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]),"undefined"==typeof d&&(d=!0),mikan.form.html.post_json(a,c,d),mikan.dialog.event.modal_button(a,b)},mikan.dialog.event.close_form_submit=function(){$("#search_form_submit").click()},mikan.dialog.form=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=$.extend(!0,{},mikan.dialog.consts.form_defaults,c),e=new mikan.action.AjaxACV;e.on_prepare=function(c){c.url=a,c.params=b},e.on_success=function(a,b){var c=d.id,e=c+"_form",f="";f+='<div class="row-fluid">',f+=b.edit!==!1?'<form class="form-horizontal" role="form" enctype="multipart/form-data" onsubmit=" return false; " name="'+e+'">':'<form class="form-horizontal" role="form" enctype="multipart/form-data" onsubmit=" return false; ">',f+='<div class="col-md-12 col-xs-12" id="'+e+'_messages"> ',f+="</div>",f+='<div class="clearfix"> </div>',f+='<div class="row-fluid" id="'+e+'"> ',f+=mikan.form.html.html_json("mikan_dialog",b,e,b.edit===!1),f+="</div>",f+="</form>",f+="</div>";var g={backdrop:!0,icon:d.icon,size:d.size,onclose:d.onclose};b.edit===!1?g.buttons=[{caption:mikan.resource.CLOSE,close:!0,class_click:"btn-default"}]:g.buttons=[{caption:mikan.resource.BACK,id:"mikan_dialog_form_back",close:!1,onclick:"mikan.dialog.event.click_form_back",hidden:!0,class_click:"btn-default"},{caption:mikan.resource.SUBMIT,id:"mikan_dialog_form_submit",close:!1,url:a.url,onclick:"mikan.dialog.event.click_form_submit",confirm:!0,class_click:"btn-primary"},{caption:mikan.resource.CLOSE,close:!0,class_click:"btn-default"}],b.icon&&(g.icon=b.icon),mikan.dialog.show(b.title,f,g)},e.on_error=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),mikan.dialog.error(mikan.resource.ERROR,b)},e.run()},mikan.dialog.confirm=function(a,b,c,d){var e=d;e||(e="mikan.dialog.event.modal_button");var f=$.extend(!0,{},mikan.dialog.consts.modal_defaults,{icon:"fa fa-question",buttons:[{caption:mikan.resource.YES,close:!0,onclick:e,class_click:"btn-primary"},{caption:mikan.resource.NO,close:!0,onclick:e,class_click:"btn-default"}]},c);return mikan.dialog.show(a,b,f)},mikan.dialog.about=function(a,b,c){var d=$.extend(!0,{},mikan.dialog.consts.modal_defaults,{icon:"info-sign"},c),e="";for(var f in b){var g=b[f];e+="<div>",e+=g,e+="</div>"}return mikan.dialog.show(a,e,d)},mikan.dialog.ok=function(a,b,c){var d=$.extend(!0,{},mikan.dialog.consts.modal_defaults,{icon:"glyphicon glyphicon-info-sign"},c);return mikan.dialog.show(a,b,d)},mikan.dialog.error=function(a,b,c){var d=$.extend(!0,{},mikan.dialog.consts.modal_defaults,{icon:"glyphicon glyphicon-warning-sign",class_title:"text-danger"},c);return mikan.dialog.show(a,b,d)},mikan.dialog.show=function(a,b,c){var d=$.extend(!0,{},mikan.dialog.consts.modal_defaults,c),e="";if(e+='<div class="modal ',d.class_modal&&(e+=d.class_modal),d.backdrop&&(e+='" data-backdrop="static'),e+='" id="'+d.id+'">',e+='<div class="modal-dialog ',d.size&&(e+=d.size),e+='">',e+='<div class="modal-content">',e+='<div class="modal-header">',e+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',e+='<h4 class="modal-title ',d.class_title&&(e+=d.class_title),e+='">',d.icon&&(e+='<span class="'+d.icon+'"> </span> '),e+=a,e+="</h4>",e+="</div>",e+='<div class="modal-body">'+b+"</div>",d.buttons&&d.buttons.length>0){e+='<div class="modal-footer">';for(var f in d.buttons){var g=d.buttons[f];e+='<button type="button" class="btn ',g.class_click&&(e+=g.class_click),g.hidden&&(e+=" hidden"),g.onclick&&(e+='" onclick="',e+=g.onclick,e+="('",e+=d.id,e+="', '",e+=f,e+="', '",g.url&&(e+=g.url),e+="'",g.confirm===!1&&(e+=", false"),e+="); "),g.id&&(e+='" id="',e+=g.id),g.close&&(e+='" data-dismiss="modal'),e+='">',g.icon&&(e+='<span class="'+g.icon+'"> </span> '),e+=g.caption,e+=" </button>"}e+="</div>"}e+="</div>",e+="</div>",e+="</div>";var h=$("#"+d.id);if(h.remove(),$("body").prepend(e),h=$("#"+d.id),h.on("hidden.bs.modal",d.onclose),d.zindex&&(h.css("z-index",d.zindex),h.parent().css("z-index",d.zindex)),"modal-full"===d.size){var i=$(".modal-body");i.css("height",window.innerHeight-185),i.css("max-height",window.innerHeight-185),i.css("overflow","auto")}return mikan.form.init_plugin(),h.modal("show"),h},mikan.dialog.picture=function(a,b){var c=$.extend(!0,{icon:"fa fa-image",size:"modal-full"},b);a.each(function(){var a=$(this),b=this.title,d=this.href;this.href="#",a.click(function(){mikan.dialog._picture(b,d,c)})})},mikan.dialog._picture=function(a,b,c){var d="";d+='<img class="modal_picture" src="'+b+'" alt="'+a+'" />',mikan.dialog.ok(a,d,c)},mikan.form={},mikan.form.consts={},mikan.form.vars={},mikan.form.event={},mikan.form.html={},mikan.form.items={},mikan.form.bootstrap={},mikan.consts.form={},mikan.form.consts.REG_EMAIL="^.+[@]...+[.]..+$}",mikan.form.consts.ICON_CHECK="fa-check-square",mikan.form.consts.ICON_UNCHECKED="fa-square-o",mikan.consts.form.init_plugin_defaults={color:{id:"input.form_color",options:{}},toggle:{id:"input.toggle",options:{off:" ",on:"有効"}},checkboxpicker:{id:"input.checkboxpicker",options:{defaultClass:"btn-default",onClass:"btn-primary",onIconClass:"fa fa-ok",offLabel:"いいえ",onLabel:"はい"}},tagsinput:{id:"input.tagsinput",options:{tagClass:"label label-primary big"}},datetimepicker:{id:"input.form_date",options:{language:"ja",format:"yyyy/mm/dd",weekStart:0,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0}},selectpicker:{id:".selectpicker"},multiselect:{id:".multiple",options:{enableFiltering:!0,includeSelectAllOption:!0,maxHeight:400}}},mikan.consts.form.input={},mikan.consts.form.input.text={},mikan.consts.form.input.text.defaults={event:{keyup:null,change:null,keypress:" return mikan.form.event.keypress(this, event);"}},mikan.form.clear_input=function(a){switch(MIKAN_DEBUG_ON&&console.log([a]),a.type){case"hidden":case"submit":case"reset":case"button":case"image":return;case"file":return;case"text":case"password":case"textarea":return void(a.value="");case"checkbox":case"radio":return void(a.checked=!1);case"select-one":case"select-multiple":return void(a.selectedIndex=0)}},mikan.form.clear=function(a){MIKAN_DEBUG_ON&&console.log([a]);var b=a;"undefined"==typeof a&&(b=document.item);var c=function(a){if(MIKAN_DEBUG_ON&&console.log([a]),mikan.dialog.result)for(var c=0;c<b.elements.length;++c)mikan.form.clear_input(b.elements[c])};mikan.dialog.confirm(mikan.resource.CONFIRM,"入力値を全てクリアしますか？",c)},mikan.form.reset=function(a){MIKAN_DEBUG_ON&&console.log([a]);var a=void 0===a?document.item:a,b=function(b){MIKAN_DEBUG_ON&&console.log([a]),mikan.dialog.result&&a.reset()};mikan.dialog.confirm(mikan.resource.CONFIRM,"入力値を初期状態にしますか？",b)},mikan.form.submit=function(a){if(void 0===a)try{$("a.btn").addClass("disabled")}catch(b){}var a=void 0===a?document.item:a;a.submit()},mikan.form.tooltip=function(){try{$("button").tooltip()}catch(a){}try{$("a.btn").tooltip()}catch(a){}try{$("span.tooltip").tooltip()}catch(a){}try{$("span.fa-question").tooltip()}catch(a){}},mikan.form.event.select_radio=function(a,b,c){var d=$("#"+b);if(!d.hasClass("active")){var e=$("button."+a);e.removeClass("active"),e.removeClass("btn-primary"),e.addClass("btn-default"),e.removeAttr("checked");var f=$("button."+a+" span."+mikan.form.consts.ICON_CHECK);
f.removeClass(mikan.form.consts.ICON_CHECK),f.addClass(mikan.form.consts.ICON_UNCHECKED),d.addClass("active"),d.addClass("btn-primary"),d.attr("checked","true");var g=$("#"+b+" span.fa");g.removeClass(mikan.form.consts.ICON_UNCHECKED),g.addClass(mikan.form.consts.ICON_CHECK),$("#"+a).attr("value",c)}},mikan.form.event.zipcode=function(a,b){var c=$(a),d=c.val();return d.length>3&&"-"!=d[3]&&c.val(d.substring(0,3)+"-"+d.substring(3)),!0},mikan.form.event.keypress=function(a,b){return 13!=b.keyCode},mikan.form.event.changecolor=function(a){return MIKAN_DEBUG_ON&&console.log([a]),MIKAN_DEBUG_ON&&console.log(a.color.toString()),$(a.target).parent().children("span.input-group-addon").children("span.fa-square").css("color",a.color.toString()),!0},mikan.form.html.input_date=function(a,b,c){return mikan.form.html.input_text(a,b,c,"form_date",' <span class="fa fa-calendar"> </span> ')},mikan.form.html.input_color=function(a,b,c){return mikan.form.html.input_text(a,b,c,"form_color",'<span class="fa fa-lg fa-square" style="color: '+b.value+';"></span>',{type:"text"})},mikan.form.html.input_zipcode=function(a,b,c){a+"_"+b.name;b.maxlength=8;var d=null;c||(d="<span onclick=\"mikan.form.html.zipcode_to('"+b.rpc+"','"+a+"', '"+b.name+"', '"+b.zipcode.ken_id+"', '"+b.zipcode.city_name+"');\">住所に変換</span>");var e=mikan.form.html.input_text(a,b,c,null,d,{event:{keyup:" return mikan.form.event.zipcode(this, event);"}});return e},mikan.form.html.zipcode_to=function(a,b,c,d,e){mikan.form.clear_input_error(b,c);var f=$("#"+b+"_"+c)[0];if(f.value){f.value.length>4&&"-"!=f.value[3]&&(f.value=f.value.substring(0,3)+"-"+f.value.substring(3));var g=mikan.json.load(mikan_url_wsgi()+a+"?c="+f.value,null,!1,null,null,!1,!1);if(MIKAN_DEBUG_ON&&console.log(g),g){var h=$("#"+b+"_"+d)[0],i=$("#"+b+"_"+e)[0];if(g.ken_id&&g.city_name)return h.value=g.ken_id,void(i.value=g.city_name)}mikan.form.set_input_error(b,c,mikan.resource.form.messages.NOTFOUNTZIPCODE)}},mikan.form.html.input_text=function(a,b,c,d,e,f){var g=$.extend(!0,{},mikan.consts.form.input.text.defaults,f);MIKAN_DEBUG_ON&&console.log(g);var h=a+"_"+b.name,i='<div class="col-xs-9 col-md-'+b.width+'">';if(c)"password"!=b.type?(i+='<p class="form-control-static">',i+=b.value?b.value:"",i+="</p>"):i+="<p> </p>";else{e&&(i+='<div class="input-group">');var j="form-control";d&&(j+=" "+d),i+='<input class="'+j+'" name="'+b.name+'" id="'+h+'"',i+=g.type?' type="'+g.type+'"':' type="'+b.type+'"',b.maxlength&&(i+=' maxlength="'+b.maxlength+'"'),b.hint&&(i+=' placeholder="'+b.hint+'"'),0==b.edit&&(i+=' disabled="disabled"'),b.required&&(i+=' required="true"'),g.event.change&&(i+=' onchange="',i+=g.event.change,i+='"'),g.event.keyup&&(i+=' onkeyup="',i+=g.event.keyup,i+='"'),g.event.keypress&&(i+=' onkeypress="',i+=g.event.keypress,i+='"'),i+=' value="',i+=b.value?b.value:"",i+='" />',e&&(i+='<span class="input-group-addon">',i+=e,i+="</span>",i+="</div>")}return i+="</div>"},mikan.form.html.input_tag=function(a,b,c,d,e){var f=a+"_"+b.name,g='<div class="col-xs-9 col-md-'+b.width+'">';if(c)g+='<p class="form-control-static">',g+=b.value?b.value:"",g+="</p>";else{g+='<div class="input-group">';var h="form-control";d&&(h+=" "+d),g+='<input data-role="tagsinput" type="text" class="tagsinput '+h+'" name="'+b.name+'" id="'+f+'"',b.maxlength&&(g+=' maxlength="'+b.maxlength+'"'),b.hint&&(g+=' placeholder="'+b.hint+'"'),0==b.edit&&(g+=' disabled="disabled"'),b.required&&(g+=' required="true"'),g+=' value="',g+=b.value?b.value:"",g+='"',g+=' onkeypress=" return mikan.form.event.keypress(this, event); " />',g+='<span class="input-group-addon">',g+='<span class="fa fa-tag"> </span>',g+="</span>",g+="</div>"}return g+="</div>"},mikan.form.html.input_label=function(a,b,c){return""},mikan.form.html.input_textonly=function(a,b,c){var d='<div class="col-xs-9 col-md-'+b.width+'">';return d+=b.value?b.value:"",d+="</div>"},mikan.form.html.input_iframe=function(a,b,c){return'<iframe class="form_iframe" frameborder="1" src="'+b.value+'" width="75%" height="250px" max-height="300px"> </iframe>'},mikan.form.html.input_select=function(a,b,c){return mikan.form.html.input_multi(a,b,!1,c)},mikan.form.html.input_multi=function(a,b,c,d){if(void 0===c)var c=!0;var e=a+"_"+b.name,f="";f+='<div class="controls col-xs-9 col-md-'+b.width+'">',MIKAN_DEBUG_ON&&console.log(b);var g=b.value;if(g)try{g=g.split(",")}catch(h){g=[g]}else g=[];for(var i in g)g[i]=String(g[i]);if(MIKAN_DEBUG_ON&&console.log(g),d){f+='<input type="hidden" id="'+e+'" name="'+b.name+'" value="'+b.value+'" />';for(var j in b.select)if(jQuery.inArray(j,g)!=-1){f+=b.select[j],f+=" ";break}}else{var k=e+" form-control input-xlarge",l="";0==b.edit&&(k+=" disabled",l=' disabled="disabled"'),c&&(k+=" multiple"),f+='<select id="'+e+'" name="'+b.name+'" class="'+k+'"',void 0!=b.onchange&&(f+=' onchange="'+b.onchange+'"'),f+=l,c&&(f+=' multiple="multiple"'),f+=">",b.required||(f+='<option value="">',f+="</option>");for(var j in b.select)f+='<option value="'+j+'"',jQuery.inArray(j,g)!=-1&&(f+=' selected="True"'),f+=">",f+=b.select[j],f+="</option>";f+="</select>"}return f+="</div>"},mikan.form.html.input_radio=function(a,b,c){var d=a+"_"+b.name,e="";if(e+='<div class="controls col-xs-9 col-md-'+b.width+'">',e+='<input type="hidden" id="'+d+'" name="'+b.name+'" value="'+b.value+'" />',c)for(var f in b.select)b.value==f&&(e+=b.select[f]);else{e+='<div class="btn-group" data-toggle="buttons">';for(var f in b.select){var g=d+" btn",h="",i="",j=mikan.html.icon.unchecked();b.value==f?(g+=" btn-primary active",j=mikan.html.icon.check(),i='checked="true"'):g+=" btn-default",0==b.edit&&(g+=" disabled",h=' disabled="disabled"'),e+='<button name="'+b.name+'" id="'+d+f+'" class="'+g+'" onclick="mikan.form.event.select_radio(\''+d+"','"+d+f+"','"+f+"'); \"",e+=h,e+=' onkeypress=" return mikan.form.event.keypress(this, event); ">',e+=j,e+=" ",e+=b.select[f],e+="</button> "}}return c||(e+="</div>"),e+="</div>"},mikan.form.html.input_message=function(a,b,c){var d=(a+"_"+b.name,'<div class="col-xs-9 col-md-'+b.width+'">');return d+="<p>",d+=b.value,d+="</p>"},mikan.form.html.input_checkbox=function(a,b,c){var d=a+"_"+b.name,e=!0;void 0!=b.right&&(e=b.right);var f="";f+='<div class="controls col-xs-9 col-md-',f+=b.width,e&&(f+=" ",f+="text-right"),f+='">';var g="control-label";e&&(f+=" &nbsp;",f+='<label for="'+d+'" class="'+g+'">',void 0!=b.check&&(f+=b.check),f+="</label> ");var h="";if(1==b.value&&(h='checked="true"'),c)1==b.value&&(f+='<p class="form-control-static">',f+='<span class="fa '+mikan.form.consts.ICON_CHECK+'"> </span>',f+="</p>");else{var i="";0==b.edit&&(g+=" disabled",i=' disabled="disabled"'),f+='<input class="checkboxpicker" type="checkbox" name="'+b.name+'" id="'+d+'" placeholder="" value=" '+b.value+'" '+h+i+" ",void 0!=b.onchange&&(f+=' onchange="'+b.onchange+'"'),0==b.edit&&(i=' disabled="disabled"'),f+=i,f+=" /> "}return e||(f+=" &nbsp;",f+='<label for="'+d+'" class="'+g+'">',void 0!=b.check&&(f+=b.check),f+="</label> "),f+="</div>"},mikan.form.html.input_textarea=function(a,b,c){var d=a+"_"+b.name,e="";if(e+='<div class="controls col-xs-9 col-md-'+b.width+'">',c)e+=mikan.form.html.input_hidden(a,b),e+="<p>",e+=b.value?b.value.replace(/\n/g,"<br />"):"",e+="</p>";else{var f="",g="form-control";0==b.edit&&(g+=" disabled",f=' readonly="readonly"'),e+="<textarea",e+=' class="'+g+'"',e+=' cols="'+10*b.width+'"',e+=' maxlength="'+b.maxlength+'"',e+=' rows="8"',b.hint&&(e+=' placeholder="'+b.hint+'"'),e+=' id="'+d+'"',e+=' name="'+b.name+'"',e+=f,e+=">",b.value&&(e+=b.value),e+="</textarea>"}return e+="</div>"},mikan.form.html.input_hidden=function(a,b){var c=a+"_"+b.name,d="";return d+='<input type="hidden" name="'+b.name+'" id="'+c+'""',d+=' value="',d+=b.value?b.value:"",d+='"',d+=" />"},mikan.form.html.input_file=function(a,b,c){var d=a+"_"+b.name,e="";return c||(e+='<input type="file" name="'+b.name+'" id="'+d+'""',e+=" />"),e},mikan.form.html.separator=function(a){var b="";return b+='<div class="controls col-xs-'+a.width+" col-md-"+a.width+'">',b+="<hr />",b+="</dir>"},mikan.form.value6select=function(a,b){for(var c in b)if(b[c]==a)return c;return null},mikan.form.html.table_json=function(a,b,c,d){mikan.form.items[c]=b;var e=mikan.form.html.create_table_inputs(c,mikan.form.items[c],d,null);return a&&($("#"+a).html(e),$("#"+a+"_messages").html("")),$("#"+c+"_submit").removeClass("disabled"),e},mikan.form.html.html_json=function(a,b,c,d){mikan.form.items[c]=b;var e=mikan.form.html.create_inputs(c,mikan.form.items[c],d,null);return a&&($("#"+a).html(e),$("#"+a+"_messages").html("")),$("#"+c+"_submit").removeClass("disabled"),e},mikan.form.html.load_json=function(a,b,c){mikan.form.items[_form_name]=mikan.json.get(b);var d=mikan.form.html.create_inputs(_form_name,mikan.form.items[_form_name],null,!1);return a&&($("#"+_id).html(d),$("#"+_id+"_messages").html("")),$("#"+c+"_submit").removeClass("disabled"),d},mikan.form.html.back_json=function(a,b,c){if(void 0==c)var c="";var d=mikan.form.html.create_inputs(b,mikan.form.items[b],!1);return a&&($("#"+a).html(d),$("#"+a+"_messages").html(c)),$("#"+b+"_submit").removeClass("hidden"),$("#"+b+"_back").addClass("hidden"),$("html,body").animate({scrollTop:0},"fast"),d},mikan.form.confirm_json=function(a,b,c,d){mikan.form.html.post_json(a,c,d)},mikan.form.validate_json=function(a){return mikan.form.validate(a,mikan.form.items[a])},mikan.form.html.confirm_inputs=function(a,b){return mikan.form.html.create_inputs(a,b,!0)},mikan.form.create_inputs=function(a,b,c,d){return mikan.form.html.create_inputs(a,b,null._confirm,d)},mikan.form.html.create_table_inputs=function(a,b,c,d){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d]),void 0==c)var c=!1;if(!d)var d=mikan.resource.REQUIRED;var e=b.items;try{e.sort(function(a,b){try{var c=a.sort,d=b.sort;return void 0==c?0:void 0==d?0:c<d?-1:c>d?1:0}catch(e){return 0}})}catch(f){}var g=b.columns;try{g.sort(function(a,b){try{var c=a.sort,d=b.sort;return void 0==c?0:void 0==d?0:c<d?-1:c>d?1:0}catch(e){return 0}})}catch(f){}var h="";h+='<table class="table table-bordered table-condensed table-hover display compact">',h+="<colgroup>",h+="<col",h+=' width="20%"',h+=' align="right"',h+=" />";for(var i=0;i<g.length;i++){var j=g[i];h+="<col",j.width&&(h+=' width="'+j.width+'"'),j.align&&(h+=' align="'+j.align+'"'),h+=" />"}h+="</colgroup>",h+="<thead>",h+="<tr>",h+="<th> </th>";for(var i=0;i<g.length;i++){var j=g[i];h+="<th>",h+=j.caption,h+="</th>"}h+="<tr>",h+="</thead>",h+="<tbody>",h+="</tbody>";for(var k in e)var l=e[k],m=a+"_"+l.name;return h+="</table>"},mikan.form.html.create_inputs=function(a,b,c,d){if(MIKAN_DEBUG_ON&&console.log([a,b,c,d]),!c)var c=!1;if(!d)var d=mikan.resource.REQUIRED;var e=b;try{void 0!=b.items&&(e=b.items)}catch(f){}try{e.sort(function(a,b){try{var c=a.sort,d=b.sort;return void 0==c?0:void 0==d?0:c<d?-1:c>d?1:0}catch(e){return 0}})}catch(f){}var g="";g+='<div class="row-fluid bootstrap-form">';var h=!1;for(var i in e){var j=e[i],k=a+"_"+j.name;if(!c||"iframe"!=j.type){if("hidden"!=j.type&&"separator"!=j.type){0!=j.formgroup&&(h&&(g+="</div>",g+='<div class="clearfix"> ',g+="</div>"),g+='<div class="form-group">',h=!0);var l=3;void 0!=j.label&&(l=j.label);var m=k+" control-label";void 0!=j.offset&&(m+=" col-xs-offset-0 col-md-offset-"+j.offset),m+=1==j.nolabel?" sr-only":" col-xs-3 col-md-"+l,g+='<label for="'+k+'" class="text-right '+m+'">',g+=void 0!=j.caption&&null!=j.caption?j.caption:j.name,j.required&&!c&&0!=j.edit&&(g+=' <span class="label-danger label">'+d+"</span>"),g+="</label>"}"text"==j.type||"number"==j.type||"password"==j.type||"datetime"==j.type||"datetime-local"==j.type||"month"==j.type||"time"==j.type||"week"==j.type||"email"==j.type||"url"==j.type||"search"==j.type||"tel"==j.type?g+=mikan.form.html.input_text(a,j,c):"color"==j.type?g+=mikan.form.html.input_color(a,j,c):"tag"==j.type?g+=mikan.form.html.input_tag(a,j,c):"date"==j.type?g+=mikan.form.html.input_date(a,j,c):"zipcode"==j.type?g+=mikan.form.html.input_zipcode(a,j,c):"textonly"==j.type?g+=mikan.form.html.input_textonly(a,j,c):"label"==j.type?g+=mikan.form.html.input_label(a,j,c):"select"==j.type?g+=mikan.form.html.input_select(a,j,c):"multi"==j.type?g+=mikan.form.html.input_multi(a,j,!0,c):"hidden"==j.type?g+=mikan.form.html.input_hidden(a,j,c):"radio"==j.type?g+=mikan.form.html.input_radio(a,j,c):"checkbox"==j.type?g+=mikan.form.html.input_checkbox(a,j,c):"message"==j.type?g+=mikan.form.html.input_message(a,j,c):"textarea"==j.type?g+=mikan.form.html.input_textarea(a,j,c):"iframe"==j.type?g+=mikan.form.html.input_iframe(a,j,c):"file"==j.type?g+=mikan.form.html.input_file(a,j,c):"separator"==j.type?g+=mikan.form.html.separator(j):console.log([a,b,c,d])}}return h&&(g+="</div>"),g+="</div>"},mikan.form.value=function(a,b){var c=null,d=$("#"+a+"_"+b.name);if("text"==b.type||"number"==b.type||"password"==b.type||"datetime"==b.type||"datetime-local"==b.type||"date"==b.type||"month"==b.type||"time"==b.type||"week"==b.type||"email"==b.type||"url"==b.type||"search"==b.type||"tel"==b.type||"color"==b.type||"zipcode"==b.type)c=d[0].value;else if("select"==b.type||"multi"==b.type)c=d.val();else if("number"==b.type)c=d[0].value;else if("radio"==b.type)c=d[0].value;else if("checkbox"==b.type)c=1==d[0].checked;else if("textarea"==b.type)c=d[0].value;else if("tag"==b.type)c=d[0].value;else if("hidden"==b.type)c=d[0].value;else if("file"==b.type)c=d[0].value;else{if("iframe"==b.type)return"";if("message"==b.type)return null}return c="undefined"==typeof c?"":c},mikan.form.set_input_error=function(a,b,c){MIKAN_DEBUG_ON&&console.log([a,b,c]);var d=mikan.form.get_input_label(a,b);MIKAN_DEBUG_ON&&console.log(d);for(var e in d)null!=d[e]&&d[e].addClass("has-error");if(c)try{d.input.parent().append('<span class="help-block">'+mikan.html.icon.attention()+" "+c+"</span>")}catch(f){MIKAN_DEBUG_ON&&console.log([f])}},mikan.form.get_input_label=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c=b;b&&b.name&&(c=b.name);var d=$("label."+a+"_"+c),e=$("#"+a+"_"+c),f=e.parent(""),g=null;return{label:d,input:e,group:f,other:g}},mikan.form.clear_input_error=function(a,b){var c=mikan.form.get_input_label(a,b);for(var d in c)c[d]&&c[d].removeClass("has-error");try{c.input.parent().children("span.help-block").remove()}catch(e){}},mikan.form.value6form=function(a,b){var c=b;try{void 0!=b.items&&(c=b.items)}catch(d){}for(var e in c){var f=c[e];if("iframe"!==f.type){var g=mikan.form.value(a,f);c[e].value=g}}return c},mikan.form.validate=function(a,b,c){if(void 0==c)var c=mikan.resource.form.messages;var d={},e=b;try{void 0!=b.items&&(e=b.items)}catch(f){}for(var g in e){var h=e[g];mikan.form.clear_input_error(a,h);var i=mikan.form.value(a,h);i="undefined"==typeof i?"":i,mikan.form.validate_input(a,h,c,d,i,e)}for(var g in d)return d;return null},mikan.form.get_item=function(a,b){for(var c in a){var d=a[c];if(d.name==b)return d}return null},mikan.form.validate_input=function(a,b,c,d,e,f){if(void 0==c)var c=mikan.resource.form.messages;input=$("#"+a+"_"+b.name);var g=jQuery.trim(e);if(input.attr("disabled"));else{var h=!!g;if(0===e&&(h=!0),e===!1&&(h=!1),void 0===e&&(h=!1),h){if(b.reg){var i=b.reg;if(e.match(i));else{var j=void 0===c.REG?c.reg:c.REG;d[b.name]={},d[b.name].type="error",d[b.name].category="reg",d[b.name].mesasges=j,mikan.form.set_input_error(a,b,j)}}if(b.number){var i="^-*[0-9]*$";"float"==b.number.type&&(i+=".[0-9]*");var k=new RegExp(i);k.exec(e);if(e.match(i)&&e>=b.number.min&&e<=b.number.max);else{var j=void 0===c.NUMBER?c.number:c.NUMBER;d[b.name]={},d[b.name].type="error",d[b.name].category="number",d[b.name].mesasges=j,mikan.form.set_input_error(a,b,j)}}if(b.match){var l=mikan.form.get_item(f,b.match),m=mikan.form.value(a,l);if(m!=e){var j=void 0===c.MATCH?c.match:c.MATCH;j=j,d[b.name]={},d[b.name].type="error",d[b.name].category="number",d[b.name].mesasges=j,mikan.form.set_input_error(a,l,b.caption+" "+j),mikan.form.set_input_error(a,b,l.caption+" "+j)}}}else if(b.required){var j=void 0===c.REQUIRED?c.required:c.REQUIRED;d[b.name]={},d[b.name].type="error",d[b.name].category="required",d[b.name].mesasges=j,mikan.form.set_input_error(a,b,j)}}},mikan.form.html.post_json=function(a,b,c,d){MIKAN_DEBUG_ON&&console.log([a,b,c,d]);var e=a+"_form",f=new mikan.action.AjaxACV;if($("html,body").animate({scrollTop:0},"fast"),$("#"+e+"_submit").addClass("disabled"),$("#"+e+"_back").addClass("disabled"),$("#"+e+"_messages").html(mikan.html.message.html_loading()),d){var g=mikan.form.html.create_inputs(e,mikan.form.items[e],!1);$("#"+e).html(g),$("#"+e+"_messages").html(""),$("#"+e+"_submit").removeClass("disabled"),$("#"+e+"_submit").removeClass("hidden"),$("#"+e+"_back").removeClass("disabled"),$("#"+e+"_back").addClass("hidden"),mikan.form.init_plugin()}else f.on_prepare=function(a){var d=c&&$("#"+e+"_back").hasClass("hidden");if(!c||d){var f=mikan.form.validate_json(e,null);if(null!=f)throw new Error("エラーが発生しました。入力内容を御確認ください。");if(d){mikan.form.items[e]=mikan.form.value6form(e,mikan.form.items[e]);var g=mikan.form.html.create_inputs(e,mikan.form.items[e],!0);return $("#"+e).html(g),$("#"+e+"_messages").html(mikan.html.bootstrap.message(mikan.resource.CONFIRM,"以下の内容でよろしいでしょうか？以下の内容で続ける場合実行を選択してください。","success","user")),$("#"+e+"_submit").removeClass("disabled"),$("#"+e+"_back").removeClass("disabled"),$("#"+e+"_back").removeClass("hidden"),void mikan.form.init_plugin()}}$("#"+e+"_messages").html(mikan.html.message.html_loading());var h={};if(c)for(var i in mikan.form.items[e]){var j=mikan.form.items[e][i];if("file"!=j.type)MIKAN_DEBUG_ON&&console.log(j),h[j.name]=j.value;else{var k=$("#"+e+"_"+j.name);MIKAN_DEBUG_ON&&console.log(k),h[j.name]=k[0].files[0]}}else{mikan.form.items[e]=mikan.form.value6form(e,mikan.form.items[e]);var l=mikan.form.items[e];try{void 0!=l.items&&(l=l.items)}catch(m){}for(var i in l){var j=l[i],n=mikan.form.value(e,j);n&&(h[j.name]=n)}var g=mikan.form.html.create_inputs(e,l,!0);$("#"+e).html(g)}$("#"+e+"_submit").addClass("hidden"),$("#"+e+"_back").addClass("hidden"),a.params=h,a.url=b},f.on_success=function(a,b){0==b.status||200==b.status?(b.reload?location.reload():b.url?location.href=b.url:b.action&&setTimeout(mikan.dialog.event.close_form_submit,1e3,b),b.messages?$("#"+e+"_messages").html(mikan.html.message.html_messages(b.messages,"danger")):$("#"+e+"_messages").html("")):this.on_error(a,b)},f.on_error=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),b.messages?_m=b.messages:_m=b;var d=c||$("#"+e+"_submit").hasClass("hidden");if(MIKAN_DEBUG_ON&&console.log([d]),!d){var f=mikan.form.html.create_inputs(e,mikan.form.items[e],!1);$("#"+e).html(f),mikan.form.init_plugin()}$("#"+e+"_messages").html(mikan.html.message.html_messages(_m,"danger")),$("#"+e+"_submit").removeClass("disabled"),$("#"+e+"_submit").removeClass("hidden")},f.on_end=function(a){},f.run()},mikan.form.html_form=function(a,b,c,d,e,f){var g=a+"_form";mikan.form.items[g]=b;var h="";return h+='<form class="form-horizontal" role="form" enctype="multipart/form-data" onsubmit=" return false; " name="'+g+'">',h+='<div class="row-fluid">',h+='<div class="col-xs-12 col-md-12 form_message" id="'+g+'_messages"> ',h+="</div>",h+='<div class="col-xs-12 col-md-12" id="'+g+'">',h+="table"==f?mikan.form.html.table_json(a,b,g):mikan.form.html.html_json(a,b,g),h+="</div>",h+='<div class="row-fluid hidden-print">',h+='<div class="col-xs-12 col-md-12">',h+="<hr />",h+="</div>",h+='<div class="col-md-offset-3 col-md-3 col-xs-6">',h+='<button id="'+g+'_submit" class="btn btn-primary btn-block" type="button"',h+=' onclick="'+c+"('"+a+"', '"+d+"', "+e+', false); ">',h+=b.buttons.submit.caption,h+="</button>",h+="</div>",b.buttons.back&&(h+='<div class="col-md-3 col-xs-6">',h+='<button id="'+g+'_back" class="btn btn-default btn-block hidden" type="button"',h+=' onclick="'+c+"('"+a+"', '"+d+"', "+e+', true); ">',h+=b.buttons.back.caption,h+="</button>",h+="</div>"),h+="</div>",h+="</div>",h+="</div>",h+="</form>"},mikan.form.html_item=function(a,b){var c=a+"_form",d="";return d+='<form class="form-horizontal" role="form">',d+='<div class="row-fluid">',d+='<div class="col-xs-12 col-md-12 form_message" id="'+c+'_messages"> ',d+="</div>",d+='<div class="col-xs-12 col-md-12">',d+=mikan.form.html.html_json(a,b,c,!0),d+="</div>",d+="</div>",d+="</form>"},mikan.form.create_form=function(a,b,c,d,e,f){MIKAN_DEBUG_ON&&console.log([a,b,c,d,e,f]);var g=new mikan.action.AjaxACV;g.on_prepare=function(c){mikan.form.items[a]=null,c.url=b},g.on_success=function(b,g){$("#"+a).html(mikan.form.html_form(a,g,c,d,e,f)),mikan.form.init_plugin()},g.on_error=function(b,c){$("#"+a).text(c)},g.run()},mikan.form.create_item=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c=new mikan.action.AjaxACV;c.on_prepare=function(c){mikan.form.items[a]=null,c.url=b},c.on_success=function(b,c){$("#"+a).html(mikan.form.html_item(a,c)),mikan.form.init_plugin()},c.on_error=function(b,c){$("#"+a).text(c)},c.run()},mikan.form.init_plugin=function(a){MIKAN_DEBUG_ON&&console.log([a]);var b=$.extend(!0,{},mikan.consts.form.init_plugin_defaults,a);try{b.toggle&&$(b.toggle.id).bootstrapToggle(b.toggle.options)}catch(c){}try{b.checkboxpicker&&$(b.checkboxpicker.id).checkboxpicker(b.checkboxpicker.options)}catch(c){}try{b.tagsinput&&$(b.tagsinput.id).tagsinput(b.tagsinput.options)}catch(c){}try{b.datetimepicker&&$(b.datetimepicker.id).datetimepicker(b.datetimepicker.options)}catch(c){}try{b.selectpicker&&$(b.selectpicker.id).selectpicker(b.selectpicker.options)}catch(c){}try{b.multiselect&&$(b.multiselect.id).multiselect(b.multiselect.options)}catch(c){}try{b.color&&(f=$(b.color.id),f.colorpicker(b.color.options),f.colorpicker().on("changeColor.colorpicker",mikan.form.event.changecolor))}catch(c){}},mikan.canvas={},mikan.canvas.consts={},mikan.canvas.vars={},mikan.canvas.event={},mikan.media={},mikan.media.consts={},mikan.media.vars={},mikan.media.event={},mikan.page={},mikan.page.consts={},mikan.page.vars={},mikan.page.event={},mikan.page.onload=null,mikan.page.onloads={},mikan.page.book={},mikan.page.book.current=null,mikan.page.load=function(){MIKAN_DEBUG_ON&&console.log([]);try{mikan.form.tooltip()}catch(a){}try{$(".picture").mikan_dialog_picture({})}catch(a){}try{mikan.page.onload&&mikan.page.onload()}catch(a){}try{if(mikan.page.onloads)for(var b in mikan.page.onloads)try{mikan.page.onloads[b]()}catch(a){}}catch(a){}mikan.page.load_sidemenu(),mikan.page.init_inview();try{$("#page_loading").fadeOut(100)}catch(a){}try{$("#page_main").fadeIn(1500)}catch(a){}$(window).bind("load resize",mikan.page.load_resize),$("div.navbar-collapse").addClass("collapse"),mikan.page.load_mermaid(),setTimeout(mikan.page.load_share_buttons,100),setTimeout(mikan.page.load_resize,1e3)},mikan.page.init_inview=function(){MIKAN_DEBUG_ON&&console.log([]);try{$(".inview").on("inview",function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]),t=$(a.target),t.hasClass("doing")||b&&(t.addClass("doing"),setTimeout(function(a){a.addClass("animated"),a.removeClass("doing")},120,t))})}catch(a){MIKAN_DEBUG_ON&&console.log([a])}},mikan.page.unload=function(){MIKAN_DEBUG_ON&&console.log([])},mikan.page.back=function(){MIKAN_DEBUG_ON&&console.log([]),history.back()},mikan.page.showbook=function(a,b){MIKAN_DEBUG_ON&&console.log([a,b]);var c=mikan.page.book.current;"undefined"==typeof b&&(b=!1),null==c&&(c="#summary_jumbotron");try{$(c).fadeOut()}catch(d){}var e=a;null==a&&(e="#summary_jumbotron"),setTimeout(function(a,b){if($("body").scrollTop(0),MIKAN_DEBUG_ON&&console.log(a),$(a).fadeIn("slow"),mikan.page.load_resize(),$(a).removeClass("hidden"),b){var c=$(".navbar-collapse");c.attr({"aria-expanded":"false","aria-hidden":"true"}),$(c).removeClass("in"),MIKAN_DEBUG_ON&&console.log(b)}setTimeout(function(){mikan.page.load_resize()},100)},300,e,b),mikan.page.book.current=a},mikan.page.sidebar=function(a){"undefined"==typeof a&&(a=!1),MIKAN_DEBUG_ON&&console.log([a]);try{var b=$("#page-wrapper");a||b.hasClass("page-wrapper2")?(b.removeClass("page-wrapper2"),$(".sidebar").fadeIn(100)):(b.addClass("page-wrapper2"),$(".sidebar").fadeOut(100))}catch(c){MIKAN_DEBUG_ON&&console.log(c)}mikan.page.load_resize()},mikan.page.load_share_buttons=function(){MIKAN_DEBUG_ON&&console.log([]);try{$("#share_buttons").jsSocials({shares:["email","twitter","facebook","googleplus","linkedin"]})}catch(a){MIKAN_DEBUG_ON&&console.log(a)}},mikan.page.load_mermaid=function(){MIKAN_DEBUG_ON&&console.log([]);try{mermaid&&mermaid.initialize({startOnLoad:!0})}catch(a){MIKAN_DEBUG_ON&&console.log(a)}},mikan.page.load_sidemenu=function(){MIKAN_DEBUG_ON&&console.log([]);try{$("#side-menu").metisMenu({toggle:!0})}catch(a){MIKAN_DEBUG_ON&&console.log(a)}},mikan.page.load_resize=function(){MIKAN_DEBUG_ON&&console.log([]);try{var a=$(".footer"),b=$(".sidebar");b.height(window.innerheight);var c=a.height(),d=b.height(),e=window.innerWidth;e<768?$("div.navbar-collapse").addClass("collapse"):$("div.navbar-collapse").removeClass("collapse");var f=$("#header"),g=f.height(),h=$(window).height();d-g<h-c?$("#page-wrapper").css("min-height",h-c+"px"):$("#page-wrapper").css("min-height",d-g+"px")}catch(i){MIKAN_DEBUG_ON&&console.log(i)}},mikan.page.touch_onclick=function(_id,_onclick){var items=$(_id);items.each(function(){var _this=$(this);_this.attr(_onclick)&&_this.on("click",function(e){eval(_this.attr(_onclick))})})},$(window).load(function(){MIKAN_DEBUG_ON&&console.log([]),mikan.page.load()});